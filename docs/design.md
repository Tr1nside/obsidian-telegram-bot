# Design.md: Obsidian Telegram Bot

## üìå –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

Obsidian Telegram Bot ‚Äî —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–º–µ—Ç–æ–∫ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å –ª–æ–∫–∞–ª—å–Ω—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º Obsidian. –ë–æ—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞–º–µ—Ç–∫–∏, –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏—Ö, —É–¥–∞–ª—è—Ç—å –∏ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –≤ –Ω–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã–µ, –≥–æ–ª–æ—Å–æ–≤—ã–µ –∏ —Ñ–æ—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ Telegram.

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- `/newnote` ‚Äî —Å–æ–∑–¥–∞—Ç—å –∑–∞–º–µ—Ç–∫—É
- `/listnotes` ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–º–µ—Ç–æ–∫
- `/printnote` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â—É—é
- `/deletenote` ‚Äî —É–¥–∞–ª–∏—Ç—å —Ç–µ–∫—É—â—É—é
- –¢–µ–∫—Å—Ç/—Ñ–æ—Ç–æ/–≥–æ–ª–æ—Å ‚Äî –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –∞–∫—Ç–∏–≤–Ω—É—é –∑–∞–º–µ—Ç–∫—É

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
obsidian_bd/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ main.py        # –ó–∞–ø—É—Å–∫ –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ commands.py    # –ö–æ–º–∞–Ω–¥—ã –∏ inline-–∫–Ω–æ–ø–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ notes.py       # –ú–µ–¥–∏–∞, —Ç–µ–∫—Å—Ç –≤ –∑–∞–º–µ—Ç–∫–∞—Ö –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ config.py      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ note_manager
‚îú‚îÄ‚îÄ .env               # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îú‚îÄ‚îÄ design.md      # Design Document
‚îÇ   ‚îú‚îÄ‚îÄadr/            # Architecture Decision Record
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ README.md
```

## ‚öôÔ∏è –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

–ë–æ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–º–µ—Ç–∫–∞–º–∏ —á–µ—Ä–µ–∑ Telegram. –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–º–µ—Ç–∫–∏ (`/newnote`).
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –∑–∞–º–µ—Ç–æ–∫ (`/listnotes`).
- –í—ã–≤–æ–¥ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∑–∞–º–µ—Ç–∫–∏ (`/printnote`).
- –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏ (`/deletenote`).
- –ó–∞–ø–∏—Å—å —Å–æ–æ–±—â–µ–Ω–∏–π (—Ç–µ–∫—Å—Ç, —Ñ–æ—Ç–æ, –∞—É–¥–∏–æ) –≤ —Ç–µ–∫—É—â—É—é –∑–∞–º–µ—Ç–∫—É.
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –ø–æ —Å–ø–∏—Å–∫—É —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`ALLOWED_USER_ID`).

### –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram.
2. –ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `user_id` –ø—Ä–æ—Ç–∏–≤ `ALLOWED_USER_ID`.
3. –ï—Å–ª–∏ –¥–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à—ë–Ω:
    - –î–ª—è –∫–æ–º–∞–Ω–¥: `commands.py` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ–∑–¥–∞—ë—Ç —Ñ–∞–π–ª –≤ `NOTES_FOLDER`).
    - –î–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π: —Ç–µ–∫—Å—Ç, —Ñ–æ—Ç–æ –∏–ª–∏ –∞—É–¥–∏–æ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ —Ç–µ–∫—É—â—É—é –∑–∞–º–µ—Ç–∫—É.
4. –û—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —á–µ—Ä–µ–∑ Telegram API.

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –¥–æ–ø—É—â–µ–Ω–∏—è

- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**:
    - –ó–∞–º–µ—Ç–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ, –±–µ–∑ –æ–±–ª–∞—á–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.
    - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è Telegram ‚Äî 4096 —Å–∏–º–≤–æ–ª–æ–≤; –¥–ª–∏–Ω–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∫–∞–∫ —Ñ–∞–π–ª—ã.
    - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ —Ç—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ FFmpeg.
- **–î–æ–ø—É—â–µ–Ω–∏—è**:
    - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–Ω–∞–µ—Ç —Å–≤–æ–π Telegram ID –∏–ª–∏ –º–æ–∂–µ—Ç —É–∑–Ω–∞—Ç—å –µ–≥–æ —á–µ—Ä–µ–∑ `/start`.
    - –ü–∞–ø–∫–∏ `NOTES_FOLDER`, `PHOTOS_FOLDER`, `AUDIO_TEMP_FOLDER` –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –∑–∞–ø–∏—Å–∏.
    - Obsidian –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞–º–µ—Ç–æ–∫, –Ω–æ –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ.

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –≤–∞–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏

- Python 3.10+, `python-telegram-bot`, `pydub`, `openai-whisper`, `ffmpeg`
- Markdown-–∑–∞–º–µ—Ç–∫–∏ (`.md`) –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å Obsidian
- `@dataclass`, `Enum`, `match-case` ‚Äî —á–∏—Å—Ç—ã–π –∫–æ–¥ –∏ —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- `note_manager` ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é –∑–∞–º–µ—Ç–∫—É

## üîÆ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ç–µ–≥–∏, —à–∞–±–ª–æ–Ω—ã –¥–ª—è –∑–∞–º–µ—Ç–æ–∫
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–µ–æ–ø–æ–∑–∏—Ü–∏–∏, –≤–∏–¥–µ–æ, —Ñ–∞–π–ª–æ–≤
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ markdown
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
